<div class="modal fade" id="user-profile-modal" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Tài khoản cá nhân</h4>
            </div>
            <div class="modal-body">
                <ul class="nav nav-tabs">
                    <li class="active">
                        <a data-toggle="tab" href="#seting-profile">Cài đặt chung</a>
                    </li>
                    <li>
                        <a data-toggle="tab" id="link-to-password-profile" href="#password-profile">Quản lý mật khẩu</a>
                    </li>
                    <li>
                        <a data-toggle="tab" id="link-to-secure-profile" href="#secure-profile">Bảo mật</a>
                    </li>
                </ul>
                <div class="tab-content">
                    <div id="seting-profile" class="tab-pane fade in active">
                        <div class="row">
                            <form class="form-horizontal" method="post" role="form" action="">
                                <!-- left column -->
                                <div class="col-md-3">
                                    <div class="text-center" id="div-update-avatar">
                                        <div id="image-edit-profile">
                                            <img id="user-modal-avatar" src="images/users/<%= user.avatar %>" class="avatar img-circle" alt="avatar">
                                        </div>
                                        <h6>Tải lên một ảnh mới...</h6>
                                        <input type="file" class="form-control" id="input-change-avatar" name="avatar"><br>
                                        <div id="show-button-update-avatar"></div>
                                    </div>
                                </div>
                                <!-- edit form column -->
                                <div class="col-md-9 personal-info">
                                    <div class="alert alert-danger alert-dismissable user-modal-alert-error">
                                        <a class="panel-close close" data-dismiss="alert">×</a>
                                        <span>Update user error example.</span>
                                        <!-- <script>openProfileModal();</script> -->
                                    </div>

                                    <div class="alert alert-success alert-dismissable user-modal-alert-success">
                                        <a class="panel-close close" data-dismiss="alert">×</a>
                                        <span>Update user success example.</span>
                                        <!-- <script>openProfileModal();</script> -->
                                    </div>

                                    <% if(user.local.email) { %>
                                        <h3>Local account</h3>
                                    <% } %>

                                    <% if(user.facebook) { %>
                                       <h3>Facebook account</h3>
                                    <% } %>

                                    <% if(user.google) { %>
                                       <h3>Google account</h3>
                                    <% } %>

                                    <br>
                                    <div class="form-group">
                                        <label class="col-lg-3 control-label">Email:</label>
                                        <div class="col-lg-8">
                                            <div class="form-control" disabled>
                                                <% if(user.local.email) { %>
                                                    <%= user.local.email %>
                                                <% } %>
            
                                                <% if(user.facebook) { %>
                                                   <%= user.facebook.email %>
                                                <% } %>
            
                                                <% if(user.google) { %>
                                                   <%= user.google.email %>
                                                <% } %>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-3 control-label">Username:</label>
                                        <div class="col-md-8">
                                            <input id="input-change-username" class="form-control" type="text" name="username" value="<%= user.username %>">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-lg-3 control-label">Giới tính:</label>
                                        <div class="col-lg-8">
                                            <label class="radio-inline col-lg-2">Nam
                                                <input id="input-change-gender-male" type="radio" name="gender" value="male" <% if(user.gender === "male") { %>checked<% } %> required>
                                                <span class="checkmark"></span>
                                            </label>
                                            <label class="radio-inline col-lg-2">Nữ
                                                <input id="input-change-gender-female" type="radio" name="gender" value="female" <% if(user.gender === "female") { %>checked<% } %> required>
                                                <span class="checkmark"></span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-lg-3 control-label">Địa chỉ:</label>
                                        <div class="col-lg-8">
                                            <input id="input-change-address" class="form-control" type="text" name="address" value="<%= user.address %>">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-lg-3 control-label">Số điện thoại:</label>
                                        <div class="col-lg-8">
                                            <input id="input-change-phone" class="form-control" type="text" name="phone" value="<%= user.phone %>">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-3 control-label"></label>
                                        <div class="col-md-8">
                                            <input type="button" id="input-btn-update-user" class="btn btn-primary custom-background-btn-primary" name="submit" value="Lưu lại">
                                            <span></span>
                                            <input type="button" id="input-btn-cancel-user" class="btn btn-default custom-background-btn-reset" value="Hủy bỏ">
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <div id="password-profile" class="tab-pane fade">
                        <div class="col-md-9 personal-info">
                            <br>
                            <div class="alert alert-danger alert-dismissable user-modal-password-alert-error">
                                <a class="panel-close close" data-dismiss="alert">×</a>
                                <span>Update user error example.</span>
                                <!-- <script>openProfileModal();</script> -->
                            </div>

                            <div class="alert alert-success alert-dismissable user-modal-password-alert-success">
                                <a class="panel-close close" data-dismiss="alert">×</a>
                                <span>Update user success example.</span>
                                <!-- <script>openProfileModal();</script> -->
                            </div>

                            <h3>Thay đổi mật khẩu</h3>
                            <br>
                            <form class="form-horizontal" method="post" role="form" action="">
                                <div class="form-group">
                                    <label class="col-md-4 control-label">Mật khẩu cũ</label>
                                    <div class="col-md-8">
                                        <input id="input-change-current-password" class="form-control" type="password" name="current_password" placeholder="Enter your curent password...">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-4 control-label">Mật khẩu mới</label>
                                    <div class="col-md-8">
                                        <input id="input-change-new-password" class="form-control" type="password" name="new_password" placeholder="Enter new password...">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-4 control-label">Nhập lại mật khẩu mới</label>
                                    <div class="col-md-8">
                                        <input id="input-change-confirm-new-password" class="form-control" type="password" name="confirm_new_password" placeholder="Enter confirm new password...">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-4 control-label"></label>
                                    <div class="col-md-8">
                                        <input type="button" id="input-btn-update-user-password" class="btn btn-primary custom-background-btn-primary" value="Lưu lại">
                                        <span></span>
                                        <input type="button" id="input-btn-cancel-user-password" class="btn btn-default custom-background-btn-reset" value="Hủy bỏ">
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>

                    <div id="secure-profile" class="tab-pane fade">
                        <div class="col-xs-6">
                            <h3>Hướng dẫn bảo mật 2 lớp:</h3>
                            <p><b>Bước 1:</b> Sử dụng điện thoại tải app bên dưới và đăng ký tài khoản.</p>
                            <p><b>Bước 2:</b> Nhấn nút bật xác thực 2 lớp để lấy mã QR.</p>
                            <p><b>Bước 3:</b> Sử dụng app vừa tải quét mã QR để lấy mã bảo mật.</p>
                            <p class="note-text"><b>*Lưu ý:</b> Khi bật xác thực 2 lớp xong, phải quét mã QR để thêm mã bảo mật vào điện thoại trước khi đăng xuất</p>
                            <a href="https://play.google.com/store/apps/details?id=com.authy.authy" target="_blank">
                                <img class="icon-download-app" src="images/logo_favicon/google-play.png" alt="icon-google-play-download">
                            </a>
                            <a href="https://apps.apple.com/us/app/authy/id494168017" target="_blank">
                                <img class="icon-download-app" src="images/logo_favicon/ios.png" alt="icon-ios-download">
                            </a>
                        </div>

                        <div class="col-xs-6 enable-2fa-area">
                            <% if(user.is2FAEnabled && QRCodeImage) { %> 
                                <button id="btn-disable-2fa" class="btn btn-default custom-background-btn-reset">
                                    Tắt xác thực 2 lớp
                                </button>
                            <% } else { %> 
                                <button id="btn-enable-2fa" class="btn btn-primary custom-background-btn-primary">
                                    Bật xác thực 2 lớp
                                </button>
                            <% } %>
                            
                            <div id="qr-code-img-area">
                                <% if(user.is2FAEnabled && QRCodeImage) { %> 
                                    <%- QRCodeImage %>
                                <% } %>
                            </div>
                            <div id="2fa-error-area"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
